<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="../../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animation.html">
<link rel="import" href="../../bower_components/paper-progress/paper-progress.html">

<link rel="import" href="../../pages/bank-accounts-page/bank-accounts-page.html">

<dom-module id="onboarding-page">
  <link rel="import" type="css" href="onboarding-page.css">
  <template>

    <div class="fit vertical layout">
      <div id="infoBar"></div>
      <paper-header-panel class="flex" mode="seamed">

        <!-- Toolbar -->
        <paper-toolbar>
          <paper-icon-button icon="arrow-back" on-tap="_onBackTap" hidden$="[[_computeBackHidden(selectedPage)]]"></paper-icon-button>
          <div class="flex"></div>
          <div>SET YOUR CHALLENGE</div>
          <div class="flex"></div>
        </paper-toolbar>

        <!-- Main Area -->
        <div class="vertical layout fit">
          <paper-progress class="transiting" value="[[_computeProgressValue(selectedPage)]]"></paper-progress>
          <neon-animated-pages id="pages" class="flex" selected="[[selectedPage]]" entry-animation="[[entryAnimations]]" exit-animation="[[exitAnimations]]">

            <!-- Page 1 -->
            <div class="vertical layout center center-justified">
              <div class="flex-1"></div>
              <div class="horizontal layout center justified" style="width: 100%">
                <iron-icon icon="chevron-left"></iron-icon>
                <div class="image-container vertical layout center center-justified">
                  <img src="../../resources/icons/pretzel.png">
                </div>
                <iron-icon icon="chevron-right"></iron-icon>
              </div>
              <paper-item><span class="bold" style="letter-spacing: 2px;">Spend Less on Food and Drinks</span></paper-item>
              <p>This week, youâ€™ll commit to spend less than your average weekly spend on food and drinks. Food and drinks include bars, cafes & restaurants.</p>
              <span class="bold">Groceries are not included.</span>
              <div class="flex-2"></div>
            </div>

            <bank-accounts-page ready="{{bankAccountsReady}}"></bank-accounts-page>

            <!-- Page 2 -->
            <div class="vertical layout center center-justified challenge-settings">
              <div class="vertical layout flex center">
                <paper-item style="font-size:12px;">Your average weekly spending on Food & Drink is <span style="color: #9ad7db; margin-left:5px">[[_getWeeklySpending(weeklySpending)]]</span></paper-item>
                <paper-item style="font-size: 22px; width: 70%"><p>How much do you want to save this week?</p></paper-item>
              </div>
              <div class="vertical layout flex" style="background-color: white">
                <template is="dom-repeat" items="[[challengePercentages]]" as="percentage">
                  <paper-icon-item>
                    <div class="selector" item-icon></div>
                    <paper-item-body two-line>
                      <div>[[_computeChallengeSavings(percentage)]]</div>
                      <div secondary>That's <span>[[percentage]]</span>% of your weekly spending</div>
                    </paper-item-body>
                  </paper-icon-item>
                </template>
              </div>
            </div>

          </neon-animated-pages>
          <div id="nextButton"
               class="vertical layout center center-justified"
               on-tap="_onNextTap"
               style$='[[_computeNextButtonStyle(selectedPage, bankAccountsReady)]]'>[[_computeButtonText(selectedPage, bankAccountsReady)]]</div>
        </div>
      </paper-header-panel>
    </div>
  </template>
</dom-module>
<script src="onboarding-page.js"></script>
